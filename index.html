<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QnA Lumintu Event</title>

    <!-- Script API -->
    <script src="api.js"></script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <!-- Custom styles for this template -->
    <link href="style.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.0/font/bootstrap-icons.css">
    
</head>
<body>
    <div class="container-lg px-sm-0 px-md-4 py-md-4 pt-lg-4 pt-xl-4 pt-xxl-4">
        <div class="card border-0 shadow-lg" style="border-radius: .75rem 0 0 .75rem; width: 100%;height: 100%;">
            <div id="card-content-full" class="row g-0">
                <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12">
                    <img src="assets/bg-group2.png" class="" alt="..." height="560px" style="border-radius: .75rem 0 0 .75rem;object-fit: fill;">
                    <div class="card-img-overlay p-0 text-white px-5 pt-4" style="width: 34%;">
                        <div class="d-flex justify-content-start align-items-center">
                            <img src="assets/Logo QnA.svg" class="img-fluid text-center py-3" width="20%" alt="...">
                            <h2 class="align-middle fw-bold mb-0 ps-3 text-white">QnA</h2>
                        </div>
                        <!-- <h1 class="card-title fw-bold pt-5">QnA</h1>
                        <img src="assets/Logo QnA.svg" class="img-fluid text-center py-5" width="40%" alt="..."> -->
                        <h1 class="fw-bold text-white mt-5">Hello,</h1>
                        <h1 class="text-white mb-5" id="customer-name">Frumentius</h1>
                        <p id="nama_sesi" class="card-text fw-bold mb-0 mt-4" style="font-size: 1.6rem;">Webinar Pengenalan Diri</p>
                        <p class="card-text mt-1">Skyline Event</p>
                        <p id="date" class="card-text fw-bold mb-0 mt-4" ></p>
                        <p id="time" class="card-text mt-1"></p>
                        <!-- <p class="card-text fw-bold text-center position-absolute start-50 translate-middle-x bottom-0 pb-3" style="font-size: .8rem;">Lumintu Event</p> -->
                    </div>
                </div>

                <!-- Chat Elements -->
                <div class="col-xl-8 col-lg-8 col-md-8 col-sm-12">
                    <div id="chat-card" class="card border-0" style="height: 560px;">
                        <div class="card-header py-4 px-4 border-0 " style="background-color: #ffffff;">
                            <!-- <div class="row justify-content-center">
                                <div class="col-1 align-content-center">           
                                    <img class="rounded-circle text-center" src="assets/Logo Lumintu.svg" alt="" width="50px">
                                </div>
                                <div class="col-11">
                                    <span class="fw-bold" style="font-size: 1.2rem;">Administrator</span>
                                </div>
                            </div> -->
                            <div class="d-flex justify-content-start align-items-center">
                                <img class="rounded-circle text-center" src="assets/Logo Lumintu.svg" alt="" width="50px">
                                <span class="fw-bold ms-3" style="font-size: 1.2rem;">Administrator</span>
                            </div>
                        </div>

                        <div id="conversation" class="card-body border-0" style="overflow-x: hidden; overflow-y: auto; background-color: #EBECEF;">
                            <div class="row g-0" id="conversation-container">
                                <div class="col-12 mb-3">
                                    <span class="px-3 pt-2 pb-4 chat-bubble float-end text-white position-relative" style="background-color: #38435F; min-width: 10%; max-width: 70%; border-radius: .5rem!important;">
                                        a
                                        <span class="text-white-50 position-absolute bottom-0 end-0 me-2 mb-1" style="font-size: .8rem;">
                                            7.30 PM
                                        </span>
                                    </span>
                                </div>
            
                                <div class="col-12 mb-3">
                                    <span class="px-3 pt-2 pb-4 chat-bubble float-start position-relative" 
                                    style="background-color: #FFFFFF;min-width: 10%; max-width: 70%; border-radius: .5rem!important;">
                                        asdhaskldnqoiwndasddddddddddddddddddddddddddddddddasdas
                                        <span class="text-black-50 position-absolute bottom-0 end-0 me-2 mb-1" style="font-size: .8rem;">
                                            7.30 PM
                                        </span>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <div id="conversation-footer" class="border-0 px-3 py-3" style="border-radius: 0 0 .75rem 0; background-color: #FFFFFF;">
                            <!-- conversation -->
                            <div class="row">
                                <div class="col-11 pe-3">
                                    <textarea class="chat-text-area form-control border-0 me-3" 
                                    id="textbox-chat" 
                                    rows="1" placeholder="Tulis pesan Anda..."
                                    style="background-color:#FFFFFF"></textarea>
                                </div>
                                <div class="col-1 text-center">
                                    <button class="btn btn-send p-1"  >
                                        <img src="assets/btnSend.svg">
                                    </button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- small devices content -->
            <div id="card-content-lite" class="">
                <!-- Chat Elements -->
                <div id="chat-card" class="card border-0" style="height: 560px;">
                    <div class="card-header py-4 px-4 border-0 " style="background-color: #ffffff;">
                        <div class="row justify-content-center">
                            <div class="col-3 col-sm-3 col-md-1 col-lg-3 align-content-center">           
                                <img class="rounded-circle text-center" src="assets/Logo Lumintu.svg" alt="" width="50px">
                            </div>
                            <div class="col-6 col-sm-6 col-md-10 col-lg-9">
                                <div class="row">
                                    <div class="col-12">
                                        <span class="fw-bold" style="font-size: 1.2rem;">Administrator</span>
                                    </div>
                                    <div class="col-12">
                                        <span class="" style="font-size: .9rem;">Online</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-3 col-sm-3 col-md- 1 col-lg-2 text-end">
                                <button class="navbar-expand-md navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
                                    <i class="bi bi-list" style="font-size: 35px;"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div id="conversation" class="card-body border-0" style="overflow-x: hidden; overflow-y: auto; background-color: #EBECEF;">
                        <div class="row g-0" id="conversation-container-small">
                            <div class="col-12 mb-3">
                                <span class="px-3 pt-2 pb-4 chat-bubble float-end text-white position-relative" style="background-color: #38435F; min-width: 10%; max-width: 70%; border-radius: .5rem!important;">
                                    a
                                    <span class="text-white-50 position-absolute bottom-0 end-0 me-2 mb-1" style="font-size: .8rem;">
                                        7.30 PM
                                    </span>
                                </span>
                            </div>
        
                            <div class="col-12 mb-3">
                                <span class="px-3 pt-2 pb-4 chat-bubble float-start position-relative" 
                                style="background-color: #FFFFFF;min-width: 10%; max-width: 70%; border-radius: .5rem!important;">
                                    asdhaskldnqoiwndasddddddddddddddddddddddddddddddddasdas
                                    <span class="text-black-50 position-absolute bottom-0 end-0 me-2 mb-1" style="font-size: .8rem;">
                                        7.30
                                    </span>
                                </span>
                            </div>
                        </div>
                    </div>

                    <div id="conversation-footer" class="fixed-bottom border-0 px-3 py-3" style="border-radius: 0 0 .75rem 0; background-color: #FFFFFF;">
                        <!-- conversation -->
                        <div class="row">
                            <div class="col-9 col-sm-9 col-md-11 col-lg-10 pe-3">
                                <textarea class="chat-text-area form-control border-0 me-3" 
                                id="textbox-chat-small" 
                                rows="1" placeholder="Tulis pesan Anda..."
                                style="background-color:#FFFFFF"></textarea>
                            </div>
                            <div class="col-3 col-sm-3 col-md-1 col-lg-2 text-end">
                                <button class="btn btn-send p-1"  >
                                    <img src="assets/btnSend.svg">
                                </button>
                            </div>
                        </div>
                    </div>
                    
                </div>


                <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
                    <img src="assets/bg-group2.png" class="" alt="..." height="100%" style="object-fit: cover;">
                    
                    <div class="offcanvas-body">
                        <div class="card-img-overlay rounded-0 text-white text-center px-4">
                            <div class="offcanvas-header px-0">
                                <button type="button" class="btn" data-bs-dismiss="offcanvas">
                                    <i class="bi bi-x text-white" style="font-size: 35px;"></i>
                                </button>
                              </div>
                            <h1 class="card-title fw-bold pt-3">QnA</h1>
                            <img src="assets/Logo QnA.svg" class="img-fluid text-center py-5" width="40%" alt="...">
                            <p class="card-text fw-bold mb-0" style="font-size: 1.6rem;">Webinar Pengenalan Diri</p>
                            <p class="card-text mt-0">Skyline Event</p>
                            <p  class="card-text fw-bold mb-0"></p>
                            <p  class="card-text mt-0"></p>
                            <p class="card-text fw-bold text-center position-absolute start-50 translate-middle-x bottom-0 pb-3" style="font-size: .8rem;">Lumintu Event</p>
                        </div>
                    </div>
                </div>
            </div>


          </div>
    </div>

    <!-- moment Js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        
        //dapet data dari url untuk dapet ID tiketnya
        var id_tiket = 1;
        var id_tiket_session = 1;
        $.ajax({  
            url: url_ip+'/items/ticket?fields=ticket_id,ticket_type,ticket_x_session.session_id.*,ticket_x_day.day_id.*',  
            type: 'GET',  
            dataType: 'json',  
            success: function(data, textStatus, xhr) { //callback - pengganti promise
                // data.data.map(item => {
                    console.log(data.data[id_tiket-1].ticket_x_session[id_tiket_session-1].session_id.start_time)
                    let nama = data.data[id_tiket-1].ticket_x_session[id_tiket_session-1].session_id.session_desc
                    let time_start = new Date(data.data[id_tiket-1].ticket_x_session[id_tiket_session-1].session_id.start_time)
                    let time_finish = new Date(data.data[id_tiket-1].ticket_x_session[id_tiket_session-1].session_id.finish_time)
                   
                    let day = moment(time_start).format('dddd')
                    let time_begin = moment(time_start).format('HH:mm')
                    let time_end = moment(time_finish).format('HH:mm')
                    let date = moment(time_start).format('LL') 

                    $('#nama_sesi').text(nama)
                    $('#date').text(day+", "+date)
                    $('#time').text(time_begin+" - "+time_end)

                // }) 
            },
            error: function(xhr, textStatus, errorThrown) {  
                console.log('Error in Database');  
            }
        })

        //dapet data dari url untuk dapet ID customer 
        let id_customer = 2;
        let name = ""
        $.ajax({  
            url: url_ip+'/items/customer',  
            type: 'GET',  
            //Authorization Header
            beforeSend: function (xhr) {
                xhr.setRequestHeader('Authorization', 'Bearer tokencoba');
            },
            dataType: 'json',  
            success: function(data, textStatus, xhr) { 
              for(var i = 0; i < data.data.length; i++){
                if( data.data[i].customer_id === id_customer ){
                    name = data.data[i].customer_name
                }
              }
              var customer_name = name.split(' ');
              name = customer_name[0]
              console.log(name)
              $('#customer-name').text(name)
            },
            error: function(xhr, textStatus, errorThrown) {  
                console.log('Error in Database');  
            }
        })
        
    </script>
    
    <script src="chat.js"></script>
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment-with-locales.min.js"></script>
    <script>
      moment.locale('id');
    </script>
</body>
</html>